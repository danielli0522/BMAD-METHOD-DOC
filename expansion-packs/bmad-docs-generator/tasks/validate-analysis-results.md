# 分析结果验证任务 (Analysis Results Validation Task)

## 目的 (Purpose)

对代码库分析结果进行交互式验证，确保分析质量、准确性和完整性，通过用户反馈优化分析深度和方向。

## 何时使用 (When to Use)

- 代码库扫描任务完成后需要质量验证
- 用户对分析结果有疑问或需要调整
- 需要优化分析深度和方向
- 准备向下一阶段代理传递分析结果前

## 前置条件 (Prerequisites)

- 代码库分析任务已完成
- 初步分析报告已生成
- 用户可提供反馈和指导

## 执行流程 (Process)

### 1. 分析结果展示

**分阶段展示分析结果：**

[[LLM: 按照以下结构展示分析结果，每个阶段后等待用户确认：

1. **项目基础信息验证**
   - 项目名称、规模、主要语言
   - 活跃状态和最后更新时间
   - 用户确认：信息是否准确？

2. **技术栈清单验证**
   - 识别的主要技术组件
   - 版本信息和依赖关系
   - 用户确认：是否有遗漏或错误？

3. **架构模式识别验证**
   - 发现的架构模式
   - 设计决策和约束
   - 用户确认：模式识别是否准确？

4. **复杂流程清单验证**
   - 识别的复杂流程列表
   - 优先级和重要性评估
   - 用户确认：流程识别是否完整？

5. **关键发现总结验证**
   - 主要技术债务
   - 性能瓶颈和风险点
   - 用户确认：发现是否准确？]]

### 2. 深度控制选项

**提供分析深度选择：**

[[LLM: 为每个分析维度提供深度控制选项：

**技术栈分析深度：**
1. 基础清单 (已识别的主要技术)
2. 详细依赖图 (包含版本和关系)
3. 深度架构分析 (包含设计决策和约束)

**架构模式分析深度：**
1. 主要模式识别 (MVC、微服务等)
2. 详细模式分析 (包含实现细节)
3. 反模式识别 (包含问题和风险)

**复杂流程分析深度：**
1. 流程清单 (名称和基本描述)
2. 流程分类 (按复杂度和重要性)
3. 详细流程分析 (包含时序图和依赖)

**风险识别深度：**
1. 主要风险点 (高优先级)
2. 详细风险评估 (包含影响分析)
3. 完整风险矩阵 (包含缓解策略)

用户选择后，相应调整分析深度和详细程度。]]

### 3. 交互式验证

**用户反馈收集和处理：**

[[LLM: 实施交互式验证机制：

1. **确认性问题**
   - "这个技术栈识别是否准确？"
   - "是否有遗漏的重要组件？"
   - "架构模式识别是否符合实际情况？"

2. **深度调整**
   - "您希望深入了解哪个方面？"
   - "是否需要更详细的技术栈分析？"
   - "复杂流程分析深度是否满足需求？"

3. **方向调整**
   - "分析重点是否需要调整？"
   - "是否有特定的关注点？"
   - "是否需要关注特定的技术领域？"

4. **质量改进**
   - "分析结果是否清晰易懂？"
   - "是否需要更多的可视化图表？"
   - "信息组织是否合理？"]]

### 4. 结果优化

**基于反馈优化分析结果：**

[[LLM: 根据用户反馈优化分析：

1. **补充遗漏信息**
   - 添加用户指出的遗漏组件
   - 深化特定领域的分析
   - 增加相关的技术细节

2. **修正错误信息**
   - 更正识别错误的技术栈
   - 调整架构模式判断
   - 更新流程分析结果

3. **调整分析深度**
   - 根据用户需求调整详细程度
   - 重点突出用户关注的领域
   - 简化不重要的分析内容

4. **改进表达方式**
   - 优化信息组织结构
   - 增加可视化图表
   - 改进技术术语解释]]

## 输出格式 (Output Format)

### 验证后的分析报告结构

```markdown
# {{项目名}} 代码库分析报告 (已验证)

## 验证信息
- 验证时间: {{timestamp}}
- 验证方式: 交互式用户验证
- 验证深度: {{depth_level}}
- 用户反馈: {{feedback_summary}}

## 1. 项目基础信息 (已验证)
[用户确认的项目信息]

## 2. 技术栈清单 (已验证)
[用户确认的技术栈信息]

## 3. 架构概览 (已验证)
[用户确认的架构信息]

## 4. 复杂流程识别 (已验证)
[用户确认的流程列表]

## 5. 关键发现 (已验证)
[用户确认的重要发现]

## 6. 验证记录
- 验证项目: [验证的具体内容]
- 用户反馈: [用户的反馈意见]
- 调整内容: [基于反馈的调整]
- 最终状态: [验证通过/需要进一步调整]
```

## 质量检查标准 (Quality Standards)

### 验证完整性检查

- [ ] 所有主要分析维度都经过用户验证
- [ ] 用户反馈已得到适当处理
- [ ] 分析深度符合用户需求
- [ ] 结果表达清晰易懂

### 准确性验证

- [ ] 技术栈信息准确无误
- [ ] 架构模式识别正确
- [ ] 复杂流程识别完整
- [ ] 风险评估合理

### 实用性评估

- [ ] 分析结果对后续工作有价值
- [ ] 信息组织便于理解和使用
- [ ] 深度控制满足不同用户需求
- [ ] 验证过程高效且用户友好

## 常见验证场景和解决方案

### 验证场景1: 技术栈识别不完整

**症状**: 用户指出遗漏了重要的技术组件
**解决方案**: 
1. 重新扫描相关目录和配置文件
2. 检查依赖管理文件
3. 分析构建和部署脚本
4. 补充遗漏的技术信息

### 验证场景2: 架构模式识别错误

**症状**: 用户认为架构模式判断不准确
**解决方案**:
1. 重新分析项目结构
2. 检查关键配置文件
3. 分析代码组织模式
4. 调整架构模式判断

### 验证场景3: 分析深度不匹配

**症状**: 用户需要更深入或更简化的分析
**解决方案**:
1. 根据用户需求调整分析深度
2. 重点突出用户关注的领域
3. 简化不重要的分析内容
4. 提供分层级的分析结果

### 验证场景4: 表达方式不清晰

**症状**: 用户认为分析结果难以理解
**解决方案**:
1. 优化信息组织结构
2. 增加可视化图表
3. 改进技术术语解释
4. 提供更多上下文信息

## 成功标准 (Success Criteria)

任务成功完成的标志：

- [ ] 用户确认分析结果准确完整
- [ ] 分析深度符合用户需求
- [ ] 结果表达清晰易懂
- [ ] 验证过程高效且用户友好
- [ ] 分析结果为后续工作提供充分信息

完成此任务后，应具备经过用户验证的高质量分析结果，为技术总览文档生成提供可靠基础。
