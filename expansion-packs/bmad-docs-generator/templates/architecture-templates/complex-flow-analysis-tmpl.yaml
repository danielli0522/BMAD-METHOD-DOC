name: "复杂流程深度分析模板"
description: "针对核心复杂流程的深度分析模板，包含时序图和详细步骤分析"
version: "3.0"
type: "complex-flow-analysis"

sections:
  - name: "执行摘要"
    type: "executive-summary"
    content: |
      # 项目名-Complex-Flow-Analysis.md
      
      ## 执行摘要
      
      本文档针对上一份技术总览文档中识别出的**重要程度为"高"和"中"**的流程，逐一进行深度分析。
      
      ### 分析范围
      - 流程数量: {{total_flows_count}}
      - 高重要程度流程: {{high_priority_flows_count}}
      - 中重要程度流程: {{medium_priority_flows_count}}
      
      ### 分析深度
      - 端到端调用链时序图
      - 关键配置项识别
      - 详细步骤分析
      - 核心业务规则提取

  - name: "高重要程度流程分析"
    type: "high-priority-flows"
    content: |
      ## 高重要程度流程分析
      
      {{#each high_priority_flows}}
      ### {{flow_name}}
      
      #### 1. 流程概述
      - **业务目标**: {{business_objective}}
      - **触发条件**: {{trigger_conditions}}
      - **潜在核心问题**: {{potential_core_issue}}
      - **关键非功能点**: {{key_non_functional_requirements}}
      
      #### 2. Mermaid时序图
      ```mermaid
      {{sequence_diagram}}
      ```
      
      #### 3. 关键配置项
      | 配置项 | 来源 | 默认值 | 影响范围 | 说明 |
      |-------|------|--------|---------|------|
      {{config_items_table}}
      
      #### 4. 详细步骤分析
      {{#each detailed_steps}}
      **{{step_name}}**: {{step_description}}
      - **业务规则**: {{business_rule}}
      - **关键逻辑**: {{key_logic}}
      - **异常处理**: {{exception_handling}}
      
      {{/each}}
      
      ---
      {{/each}}

  - name: "中重要程度流程分析"
    type: "medium-priority-flows"
    content: |
      ## 中重要程度流程分析
      
      {{#each medium_priority_flows}}
      ### {{flow_name}}
      
      #### 1. 流程概述
      - **业务目标**: {{business_objective}}
      - **触发条件**: {{trigger_conditions}}
      - **潜在核心问题**: {{potential_core_issue}}
      - **关键非功能点**: {{key_non_functional_requirements}}
      
      #### 2. Mermaid时序图
      ```mermaid
      {{sequence_diagram}}
      ```
      
      #### 3. 关键配置项
      | 配置项 | 来源 | 默认值 | 影响范围 | 说明 |
      |-------|------|--------|---------|------|
      {{config_items_table}}
      
      #### 4. 详细步骤分析
      {{#each detailed_steps}}
      **{{step_name}}**: {{step_description}}
      - **业务规则**: {{business_rule}}
      - **关键逻辑**: {{key_logic}}
      - **异常处理**: {{exception_handling}}
      
      {{/each}}
      
      ---
      {{/each}}

  - name: "流程间依赖关系"
    type: "flow-dependencies"
    content: |
      ## 流程间依赖关系分析
      
      ### 依赖关系图
      ```mermaid
      {{flow_dependencies_diagram}}
      ```
      
      ### 依赖关系说明
      {{flow_dependencies_explanation}}

  - name: "性能分析"
    type: "performance-analysis"
    content: |
      ## 性能分析
      
      ### 性能瓶颈识别
      {{performance_bottlenecks}}
      
      ### 优化建议
      {{optimization_suggestions}}

  - name: "结论"
    type: "conclusion"
    content: |
      ## 结论
      
      ### 关键发现
      {{key_findings}}
      
      ### 风险点
      {{risk_points}}
      
      ### 改进建议
      {{improvement_suggestions}}

metadata:
  analysis_type: "complex-flow-analysis"
  required_agents: ["architecture-analyst", "code-analyzer", "performance-expert"]
  estimated_duration: "6-8 hours"
  complexity: "high"
  deliverables:
    - "项目名-Complex-Flow-Analysis.md"
  analysis_standards:
    - "时序图必须清晰展示服务间/模块间的调用关系"
    - "必须注明数据库、缓存、外部API的关键访问操作类型"
    - "必须体现关键的业务逻辑判断分支"
    - "时序图中直接体现聚合后的关键步骤S1、S2、S3等"
    - "每个步骤必须说明关键作用&核心业务规则"
