# BMad Documentation Generator

## 概述

BMad Documentation Generator 是一个基于 BMad-Method 框架的专业化扩展包，专门用于从复杂代码库生成高质量的技术文档。该扩展包集成了 bmad-core 的先进架构模式和提示词工程最佳实践，能够生成三套标准化技术文档，帮助工程师在3天内快速理解、开发和维护项目。

## 核心特性

### 🎯 基于 bmad-core 架构模式
- **交互式验证**: 采用 bmad-core 的 1-9 选项交互模式
- **深度控制**: 用户可选择分析深度（概览 vs 深度分析）
- **证据驱动**: 所有结论都基于具体的代码证据
- **模式识别**: 主动识别和分类架构模式与反模式

### 🔍 专业化代理团队
- **Code Analyst (Alex)**: 深度代码扫描与架构侦探
- **Tech Architect (Sarah)**: 企业级技术架构师
- **Doc Engineer (Maya)**: 文档工程师与结构化输出专家
- **Flow Analyst (Jordan)**: 业务流程与流程分析师 (增强版 - 支持S1/S2/S3阶段标记)
- **Problem Solver (Dr. Morgan)**: 站点可靠性工程师与问题诊断专家

### 📋 三套标准化文档
1. **技术总览文档** (`项目名-Technical-Overview.md`)
   - 项目背景与定位
   - 完整技术栈清单
   - 五视图架构设计（逻辑、开发、部署、运行时、数据视图）
   - 核心设计原则和技术特性

2. **复杂流程分析文档** (`项目名-Complex-Flow-Analysis.md`)
   - 核心复杂流程识别
   - 增强的时序图 (含S1/S2/S3阶段标记)
   - 详细的业务规则和逻辑分析
   - 配置依赖分析
   - 性能影响评估

3. **问题诊断与解决方案文档** (`项目名-Problem-Diagnosis-Solution.md`)
   - 潜在问题预测（从SRE角度）
   - 问题-解决方案矩阵
   - 故障诊断指南
   - 监控和告警策略

## 架构设计

### 基于 bmad-core 的设计原则

#### 1. 交互式验证模式
```yaml
# 采用 bmad-core 的 elicitation 模式
elicit: true
custom_elicitation:
  - 提供分析深度选项 (1-9)
  - 分阶段展示结果并等待确认
  - 基于用户反馈优化分析方向
```

#### 2. 证据驱动分析
- 所有结论必须基于具体代码证据
- 引用文件路径、行号或配置值
- 提供可验证的分析依据

#### 3. 深度控制机制
- 用户可选择分析深度
- 支持概览、详细、深度三种模式
- 根据用户需求动态调整

#### 4. 模式识别能力
- 主动识别架构模式
- 分类反模式和设计问题
- 提供模式改进建议

## 使用方法

### 1. 激活文档生成团队
```bash
# 使用完整的文档生成团队
/bmadDocs:teams:docs-generation-team
```

### 2. 执行代码库分析
```bash
# 激活 Code Analyst 进行深度扫描
/bmadDocs:agents:code-analyst *scan-codebase
```

### 3. 生成技术总览
```bash
# 激活 Tech Architect 生成技术总览
/bmadDocs:agents:tech-architect *generate-technical-overview
```

### 4. 分析复杂流程
```bash
# 激活 Flow Analyst 进行流程分析
/bmadDocs:agents:flow-analyst *analyze-complex-flows
```

### 5. 诊断潜在问题
```bash
# 激活 Problem Solver 进行问题诊断
/bmadDocs:agents:problem-solver *diagnose-potential-problems
```

## 工作流程

### 阶段1: 代码库深度扫描
1. **项目基础信息收集**
   - 项目名称、规模、主要语言
   - 活跃状态和最后更新时间

2. **技术栈识别和分析**
   - 编程语言检测
   - 框架和库识别
   - 基础设施组件分析

3. **架构模式分析**
   - 目录结构分析
   - 架构模式识别
   - 代码组织模式评估

4. **复杂流程识别**
   - 业务流程发现
   - 调用链追踪
   - 复杂性评估

5. **交互式验证**
   - 分阶段展示结果
   - 用户确认和反馈
   - 深度调整和优化

### 阶段2: 技术总览生成
1. **架构视图创建**
   - 逻辑视图
   - 开发视图
   - 部署视图
   - 运行时视图
   - 数据视图

2. **技术栈清单**
   - 核心技术组件
   - 支持的环境
   - 扩展生态系统

3. **设计原则文档**
   - 架构设计原则
   - 代理设计模式
   - 工作流设计模式

### 阶段3: 复杂流程分析
1. **流程优先级确认**
   - 重要性评估和筛选
   - 分析优先级排序

2. **单个流程深度分析**
   - 流程概述分析
   - 增强时序图创建 (含S1/S2/S3阶段标记)
   - 业务规则提取和分析
   - 配置依赖分析

3. **性能影响评估**
   - 性能瓶颈识别
   - 优化建议提供

### 阶段4: 问题诊断与解决方案
1. **潜在问题预测**
   - 从用户视角识别问题
   - 从系统视角发现风险
   - 基于数据驱动诊断

2. **解决方案开发**
   - 具体诊断步骤
   - 可操作的解决方案
   - 预防性维护建议

## 质量保证

### 基于 bmad-core 的质量标准

#### 1. 分析完整性检查
- [ ] 所有主要编程语言都已识别
- [ ] 核心框架和库都已发现
- [ ] 项目结构已完整映射
- [ ] 至少识别出 15+ 个复杂流程
- [ ] 数据库设计已分析
- [ ] 依赖关系图已生成

#### 2. 准确性验证
- [ ] 技术栈信息可以在代码中验证
- [ ] 复杂流程的入口点可以定位
- [ ] 架构模式与实际代码组织一致
- [ ] 依赖关系基于实际代码调用

#### 3. 实用性评估
- [ ] 分析结果为后续文档生成提供充分信息
- [ ] 复杂性评估有助于优先级排序
- [ ] 技术栈信息支持架构文档生成
- [ ] 发现的问题点有助于问题诊断文档

## 扩展和定制

### 添加新的分析维度
1. 在 `agents/` 目录下创建新的代理定义
2. 在 `tasks/` 目录下定义分析任务
3. 在 `templates/` 目录下创建文档模板
4. 更新 `workflows/docs-generation-workflow.yaml`

### 自定义分析深度
```yaml
# 在代理定义中添加深度控制
analysis_depth_options:
  - overview: "基础概览分析"
  - detailed: "详细分析"
  - deep_dive: "深度分析"
```

### 集成新的 elicitation 方法
```yaml
# 在 elicitation-methods.md 中添加新方法
- method_name: "自定义方法"
  description: "方法描述"
  use_case: "适用场景"
```

## 最佳实践

### 1. 分析深度选择
- **概览模式**: 适合快速了解项目结构
- **详细模式**: 适合深入理解技术实现
- **深度模式**: 适合全面掌握系统架构

### 2. 交互式验证
- 分阶段展示分析结果
- 及时收集用户反馈
- 根据反馈调整分析方向

### 3. 证据驱动
- 所有结论都要有代码证据
- 提供具体的文件路径和行号
- 确保分析结果可验证

### 4. 模式识别
- 主动识别架构模式
- 分类反模式和设计问题
- 提供改进建议

## 故障排除

### 常见问题

#### 1. 分析深度不匹配
**症状**: 用户需要更深入或更简化的分析
**解决方案**: 
- 使用深度控制选项调整分析级别
- 根据用户需求重点突出特定领域

#### 2. 技术栈识别不完整
**症状**: 遗漏了重要的技术组件
**解决方案**:
- 重新扫描相关目录和配置文件
- 检查依赖管理文件
- 分析构建和部署脚本

#### 3. 架构模式识别错误
**症状**: 架构模式判断不准确
**解决方案**:
- 重新分析项目结构
- 检查关键配置文件
- 分析代码组织模式

## 版本历史

### v1.0.0 (2025-08-17)
- 初始版本发布
- 集成 bmad-core 架构模式
- 实现三套标准化文档生成
- 支持交互式验证和深度控制

## 贡献指南

1. Fork 项目仓库
2. 创建功能分支
3. 提交更改
4. 创建 Pull Request

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

---

**基于 BMad-Method 框架构建** | **专为技术文档生成优化** | **支持交互式验证和深度控制**
